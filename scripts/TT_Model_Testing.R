hierarchical_regression <- "
  model{
  # ------------------------
  # What we need to add:
  # ------------------------
  #  1. # Calculate GDD; GDD & Tmean are vectors of mean temp
  #     Fit at species level; affects all individuals --> do at individual level for ease?
  #  1.1. GDD = Tmean - TBASE[spp]
  #  1.2. GDD[GDD<0] = 0
  # # 1.3. Then could play with start day if desired
  #  2. # DOY = day of event
  #  THRESH[ind] = cumsum(GDD[1:DOY[ind]])
  # What we need to pass into the model
  # 1. Temperature time series
  # 2. Individual DOY for event
  # ------------------------

    for(k in 1:n){
        mu[k] <- ind[pln[k]]  
        y[k] ~ dnorm(mu[k], sPrec)
    }
    
    for(k in 1:n){
        munew[k] <- ind[pln[k]]  
        Ynew[k] ~ dnorm(munew[k], sPrec)
    }
     
      
    for(j in 1:nSp){
      THRESH[j] <-  a[j]
      a[j] ~ dnorm(Tprior, aPrec[j])
      aPrec[j] ~ dgamma(0.2, 0.1)
      Tprior[j] ~ dunif(1, 600)
    }

    for(t in 1:nAcc){
      Accession[t] <-  THRESH[sp[t]] + b[t]
      b[t] ~ dnorm(0, bPrec[t])
      bPrec[t] ~ dgamma(0.1, 0.1)
    }
    
    for(i in 1:nPln){
        ind[i] <-  Accession[acc[i]] + c[i]
        c[i] ~ dnorm(0, cPrec)
    }
    sPrec ~ dgamma(0.1, 0.1)
    cPrec ~ dgamma(0.1, 0.1)

  }
  "